<div class="container">
    <audio src="assets/cat.mp3" preload></audio>
    <div class="confetti" [@confetti]="state"></div>
    <div class="fireworks" [@fireworks]="state"></div>
    <div class="content" [ngClass]="getClass()" [@taskState]="state" (@taskState.done)="onAnimationEnd()">
        <div *ngIf="state === 'preload'">
            <button (click)="launch()">–ù–∞—á–∞—Ç—å</button>
        </div>

        <div *ngIf="state === 'start' || state === 'start-next'">
            <h1>–° –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è, –ö–∏—Å—ã–∫!</h1>
            <h1>üéâüéâüéâ</h1>
            <p class="cont">–í—ã –≥–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å —Å–≤–æ–π –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –∫–≤–µ—Å—Ü–∏–∫?</p>
            <button type="button" (click)="startQuest()">–ü–æ–≥–Ω–∞–ª–∏!</button>
        </div>

        <div *ngIf="state === 'current' || state === 'next'">
            <h3>{{i + 1}}/{{maxQ}}</h3>
            <img [src]="task.pic" />
            <h2>{{task.task}}</h2>
            <form autocomplete="off" (submit)="checkAnswer()">
                <p class="error-text">{{isError ? '–ù–∏—Ü. –ü–æ–¥—É–º–æ–π—Ç–µ –µ—â—ë :<' : ''}}</p>
                <input type="text" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç" name="answer" [(ngModel)]="answer" required 
                    [@input]="isError ? 'error' : ''" (focus)="clearError()" (input)="clearError()"/>
                <button type="submit">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            </form>
        </div>

        <div *ngIf="state === 'end'">
            <h1>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h1>
            <p>–í—ã —Å–∞–º—ã–π –≥–µ–Ω–∏–∞–ª—å–Ω—ã–π –∫–∏—Å–∏–∫ –Ω–∞ —Å–≤–µ—Ç–µ!</p>
            <img src="assets/cel_cat.jpg" />
        </div>
        <div *ngIf="state === 'reward'">
            <h1>–ë–µ–≥–∏—Ü–µ –≥—é—à–∞—Ü!</h1>
            <p>–ï—â—ë —Ä–∞–∑ —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è! üç∞üç∞üç∞</p>
            <img src="assets/cake.jpg" />
        </div>
    </div>
</div>